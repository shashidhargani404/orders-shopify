(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[0],{123:function(e,t){},126:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(19),o=a.n(l),c=a(10),s=(a(76),a(13)),i=a(11);var m=function(e){return r.a.createElement("nav",{className:"navbar navbar-dark bg-dark sticky-top"},r.a.createElement(s.b,{to:"/",className:"text-decoration-none"},r.a.createElement("span",{className:"font-weight-bold text-light",style:{fontSize:"24px",marginLeft:"30px"}},"Shopify - Book Store Orders")),r.a.createElement("a",{href:"https://saahityabookstore.myshopify.com/",target:"_blank",className:"pr-4 text-light"},"Store"))},d=a(21),u=a(22),p=a(24),h=a(23),E=a(25),f=a(66),b=a(61),g=a.n(b),v=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={newOrder:!1},a}return Object(E.a)(t,e),Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;e.orders.length==1+this.props.orders.length&&(this.setState({newOrder:!0}),setTimeout((function(){t.setState({newOrder:!1})}),1e4))}},{key:"render",value:function(){return r.a.createElement("div",{className:"p-5"},r.a.createElement("h3",{className:"pb-2"},"Total Orders - ",this.props.orders.length),r.a.createElement("div",null),this.state.newOrder?r.a.createElement("div",{class:"alert alert-primary",role:"alert"},"Hey congrats, You got a new order!"):"",r.a.createElement("table",{className:"table table-hover",style:{backgroundColor:"rgb(240,240,240)"}},r.a.createElement("thead",{className:"bg-secondary text-light"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"#"),r.a.createElement("th",{scope:"col"},"Order"),r.a.createElement("th",{scope:"col"},"Date"),r.a.createElement("th",{scope:"col"},"Customer"),r.a.createElement("th",{scope:"col"},"Total"))),r.a.createElement("tbody",null,this.props.orders.map((function(e,t){return r.a.createElement("tr",{key:e._id},r.a.createElement("th",{scope:"row"},t+1),r.a.createElement("td",null,e.name),r.a.createElement("td",null," ",g()(e.created_at).format("MMM Do YY, h:mm a")," "),r.a.createElement("td",null,e.first_name+" "+e.last_name,r.a.createElement(s.b,{to:"/customers/".concat(e._id)},r.a.createElement(f.a,{className:"ml-2"}))),r.a.createElement("td",null,e.total_price.toFixed(2)))})))))}}]),t}(r.a.Component),y=Object(c.b)((function(e){return{orders:e.orders}}))(v),N=a(62),O=a.n(N).a.create({baseURL:"/"}),_=function(e,t){return function(a){O.put("/orders/".concat(t.match.params.id),e).then((function(e){e.data.hasOwnProperty("email")&&(a({type:"EDIT_ORDER",payload:e.data}),t.history.push("/"))})).catch((function(e){console.log(e)}))}},x=a(63),S=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.first_name,r=t.last_name,l=t.email,o=t.phone,c={first_name:n,last_name:r,email:l,phone:"+91"+o};r&&(l||o)?(a.props.handleSubmit(c),a.setState({loading:!0})):window.alert("Fields are required!")},a.handleChange=function(e){"phone"===e.target.name&&!isNaN(e.target.value)&&e.target.value.length<=10?a.setState({phone:e.target.value}):"phone"!==e.target.name&&a.setState(Object(x.a)({},e.target.name,e.target.value))},a.state={first_name:e.first_name||"",last_name:e.last_name||"",email:e.email||"",phone:e.phone?e.phone.slice(3):"",code:"+91",loading:!1},a}return Object(E.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.first_name,a=e.last_name,n=e.email,l=e.phone,o=e.code,c=e.loading,s=t.length>2?"form-control is-valid":"form-control",i=a.length>2?"form-control is-valid":"form-control is-invalid",m=/\S+@\S+\.\S+/.test(n)?"form-control is-valid":"form-control is-invalid",d=10==l.length?"form-control is-valid":"form-control is-invalid";return r.a.createElement("div",{className:"container p-4",style:{width:"500px"}},r.a.createElement("h4",{className:"mb-3"},"Edit Customer Details"),r.a.createElement("hr",null),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"first_name"},"First name"),r.a.createElement("input",{type:"text",name:"first_name",value:t,onChange:this.handleChange,className:s,id:"first_name","aria-describedby":"first_name",placeholder:"First name"}),t?"":r.a.createElement("p",{className:"text-danger mt-2",style:{fontSize:"13px"}},"* First name NA")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"last_name"},"Last name"),r.a.createElement("input",{type:"text",name:"last_name",value:a,onChange:this.handleChange,className:i,id:"last_name","aria-describedby":"last_name",placeholder:"Last name"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"exampleInputEmail1"},"Email address"),r.a.createElement("input",{type:"email",name:"email",value:n,onChange:this.handleChange,className:m,id:"exampleInputEmail1","aria-describedby":"emailHelp",placeholder:"Enter email address"}),n?"":r.a.createElement("p",{className:"text-danger mt-2",style:{fontSize:"14px"}},"* Email NA")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"exampleInputPhone"},"Phone"),r.a.createElement("div",{className:"input-group mb-2"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("div",{className:"input-group-text"},o)),r.a.createElement("input",{type:"phone",name:"phone",value:l,onChange:this.handleChange,className:d,id:"exampleInputPhone",placeholder:"Enter mobile number"})),l?"":r.a.createElement("p",{className:"text-danger mt-2",style:{fontSize:"14px"}},"* Phone number NA")),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Save")),c&&r.a.createElement("div",{className:"d-flex justify-content-center",style:{position:"fixed",left:"50%",top:"39%"}},r.a.createElement("div",{className:"spinner-border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))))}}]),t}(r.a.Component),j=Object(c.b)()(S);var w=Object(c.b)((function(e,t){return{order:e.orders.find((function(e){return e._id===t.match.params.id}))}}))((function(e){return e.order?r.a.createElement(j,Object.assign({},e.order,{handleSubmit:function(t){e.dispatch(_(t,e))}})):""}));var D=function(e){return r.a.createElement(s.a,null,r.a.createElement(m,null),r.a.createElement(i.a,{path:"/",component:y,exact:!0}),r.a.createElement(i.a,{path:"/customers/:id",component:w}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var k=a(64),C=a.n(k),R=a(14),F=a(65),A=a(36),I=[],T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ORDERS":return t.payload.reverse();case"ADD_ORDER":return[t.payload].concat(Object(A.a)(e));case"EDIT_ORDER":return e.map((function(e){return e._id===t.payload._id?t.payload:e}));default:return Object(A.a)(e)}},P=function(){return Object(R.d)(Object(R.c)({orders:T}),Object(R.a)(F.a))}();P.dispatch((function(e){O.get("/orders").then((function(t){Array.isArray(t.data)&&e({type:"SET_ORDERS",payload:t.data})})).catch((function(e){console.log(e)}))})),C()("/").on("new order",(function(e){P.dispatch(function(e){return{type:"ADD_ORDER",payload:e}}(e))}));var L=r.a.createElement(c.a,{store:P},r.a.createElement(D,null));o.a.render(L,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},67:function(e,t,a){e.exports=a(126)},76:function(e,t,a){}},[[67,1,2]]]);
//# sourceMappingURL=main.b2a9df83.chunk.js.map